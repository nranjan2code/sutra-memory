[package]
name = "sutra-grid-agent"
version = "0.1.0"
edition = "2021"

[dependencies]
tonic = "0.12"
prost = "0.13"
tokio = { version = "1", features = ["full"] }
env_logger = "0.11"
log = "0.4"
anyhow = "1.0"
serde = { version = "1.0", features = ["derive"] }
toml = "0.8"
hostname = "0.4"
chrono = "0.4"
sutra-grid-events = { path = "../sutra-grid-events" }

# Platform adapters
bollard = { version = "0.17", optional = true }  # Docker
kube = { version = "0.95", optional = true }      # Kubernetes
k8s-openapi = { version = "0.23", features = ["v1_30"], optional = true }
async-trait = "0.1"
futures = "0.3"  # For async stream processing

[features]
default = ["platform-process"]
platform-docker = ["bollard"]
platform-kubernetes = ["kube", "k8s-openapi"]
platform-process = []  # Native process spawning
all-platforms = ["platform-docker", "platform-kubernetes", "platform-process"]

[build-dependencies]
tonic-build = "0.12"
